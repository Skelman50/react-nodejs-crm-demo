(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(316)},144:function(e,t,a){},154:function(e,t){},156:function(e,t){},193:function(e,t){},194:function(e,t){},316:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(133),o=a.n(r),s=(a(144),a(1)),c=a(2),l=a(5),u=a(3),p=a(4),d=a(12),h=a(59),m=a(318),b=a(320),f=a(135),v=a(8),O=a(6),E=a(321),j=a(319);function g(e){return{type:"GET_USER",token:e}}function y(e){return{type:"VALIDATION",data:e}}function k(e){return{type:"IS_LOADING",preload:e}}function C(e){return function(t){return fetch("/api/category",{method:"get",headers:{Authorization:e,Accept:"application/json","Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return t(function(e){return{type:"GET_CATEGORIES",categories:e}}(e))})}}function N(e){return{type:"GET_CATEGORY_BY_ID",category:e}}var w=a(22),I=a(18),P=a.n(I);function D(e,t){return function(a){return fetch("/api/position/".concat(t),{method:"get",headers:{Accept:"application/json","Content-type":"application/json",Authorization:e}}).then(function(e){return e.json()}).then(function(e){a(function(e){return{type:"GET_POSITIONS",positions:e}}(e))})}}function V(e){return{type:"UPDATE_POSITION",positions:e}}function S(e){return{type:"ORDER_ID",id:e}}function F(e){return{type:"CHECK_LINKS",links:e}}var T=a(28),L=a.n(T),A=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"toast",value:function(e){return L.a.toast({html:e})}},{key:"floatingInit",value:function(e){L.a.FloatingActionButton.init(e)}},{key:"updateInput",value:function(e){L.a.updateTextFields(e)}},{key:"modalInit",value:function(e){return L.a.Modal.init(e)}},{key:"targetInit",value:function(e){return L.a.TapTarget.init(e)}},{key:"toolTipInit",value:function(e){return L.a.Tooltip.init(e)}},{key:"datePickeInit",value:function(e,t){return L.a.Datepicker.init(e,t)}}]),e}(),_=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{type:"email",required:!0,ref:this.props.emailValue,onChange:this.props.onChange,onFocus:this.props.onFocusEmail}),i.a.createElement("label",{htmlFor:"email"},"Email:"),this.props.validation.isEmailErrorVisible?i.a.createElement("span",{className:"helper-text red-text"},0===this.props.emailValue.current.value.length?"Email \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c":this.props.checkEmail?null:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email"):null)}}]),t}(n.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{type:"password",required:!0,ref:this.props.passwordValue,onChange:this.props.onChange,onFocus:this.props.onFocusPassword}),i.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c:"),this.props.validation.isPasswordErrorVisible?i.a.createElement("span",{className:"helper-text red-text"},0===this.props.passwordValue.current.value.length?"\u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c":this.props.passwordValue.current.value.length<6&&this.props.passwordValue.current.value.length>0?"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":null):null)}}]),t}(n.Component),R=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"card-action"},i.a.createElement("button",{ref:this.props.submitBtn,onClick:this.props.onSubmit,disabled:this.props.validation.isBtnDisabled,className:"modal-action btn waves-effect"},this.props.click))}}]),t}(n.Component),z=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).emailValue=i.a.createRef(),e.passwordValue=i.a.createRef(),e.submitBtn=i.a.createRef(),e.redExpEmail=/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/,e.countFocusEmail=0,e.countFocusPassword=0,e.materialize=new A,e.onSubmit=e.onSubmit.bind(Object(O.a)(Object(O.a)(e))),e.onChange=e.onChange.bind(Object(O.a)(Object(O.a)(e))),e.onFocusEmail=e.onFocusEmail.bind(Object(O.a)(Object(O.a)(e))),e.onFocusPassword=e.onFocusPassword.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){"/login?registered=true"===this.props.location.pathname&&this.materialize("\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443")}},{key:"onChange",value:function(){return this.checkEmail=this.redExpEmail.test(this.emailValue.current.value),this.passwordValue.current.value.length>=6&&this.checkEmail?this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!1})):this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!0}))}},{key:"onFocusEmail",value:function(){return this.countFocusEmail+=1,!this.checkEmail&&this.countFocusEmail>=2?this.props.checkValidation(Object(v.a)({},this.props.validation,{isEmailErrorVisible:!0})):this.props.checkValidation(Object(v.a)({},this.props.validation,{isEmailErrorVisible:!1}))}},{key:"onFocusPassword",value:function(){return this.countFocusPassword+=1,this.passwordValue.current.value.length<6&&this.countFocusPassword>=2?this.props.checkValidation(Object(v.a)({},this.props.validation,{isPasswordErrorVisible:!0})):this.props.checkValidation(Object(v.a)({},this.props.validation,{isPasswordErrorVisible:!1}))}},{key:"onSubmit",value:function(){var e=this;this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!0}));var t={email:this.emailValue.current.value,password:this.passwordValue.current.value};this.props.userLogin(t,this.materialize,this.props.history).then(function(){return e.props.checkValidation(Object(v.a)({},e.props.validation,{isBtnDisabled:!1}))})}},{key:"render",value:function(){return i.a.createElement("div",{className:"auth-block"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-content"},i.a.createElement("span",{className:"card-title"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),i.a.createElement(_,Object.assign({},this.props,{checkEmail:this.checkEmail,onFocusEmail:this.onFocusEmail,emailValue:this.emailValue,onChange:this.onChange,countFocusEmail:this.countFocusEmail})),i.a.createElement(M,Object.assign({},this.props,{onFocusPassword:this.onFocusPassword,passwordValue:this.passwordValue,onChange:this.onChange,countFocusPassword:this.countFocusPassword}))),i.a.createElement(R,Object.assign({},this.props,{onSubmit:this.onSubmit,submitBtn:this.submitBtn,click:"\u0412\u043e\u0439\u0442\u0438"}))))}}]),t}(n.Component),x=Object(d.b)(function(e){return{validation:e.validation,user:e.user}},function(e){return{checkValidation:function(t){return e(y(t))},userLogin:function(t,a,n){return e(function(e,t,a){return function(n){return fetch("/api/auth/login",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json","Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(!e.error||200===e.status||e.token)return n(g(e.token)),localStorage.setItem("auth-token",e.refreshToken),a.push("/overview");t.toast(e.error)})}}(t,a,n))}}})(z),B=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).emailValue=i.a.createRef(),e.passwordValue=i.a.createRef(),e.redExpEmail=/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/,e.countFocusEmail=0,e.countFocusPassword=0,e.materialize=new A,e.onChange=e.onChange.bind(Object(O.a)(Object(O.a)(e))),e.onFocusEmail=e.onFocusEmail.bind(Object(O.a)(Object(O.a)(e))),e.onFocusPassword=e.onFocusPassword.bind(Object(O.a)(Object(O.a)(e))),e.onSubmit=e.onSubmit.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(){return this.checkEmail=this.redExpEmail.test(this.emailValue.current.value),this.passwordValue.current.value.length>=6&&this.checkEmail?this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!1})):this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!0}))}},{key:"onFocusEmail",value:function(){return this.countFocusEmail+=1,!this.checkEmail&&this.countFocusEmail>=2?this.props.checkValidation(Object(v.a)({},this.props.validation,{isEmailErrorVisible:!0})):this.props.checkValidation(Object(v.a)({},this.props.validation,{isEmailErrorVisible:!1}))}},{key:"onFocusPassword",value:function(){return this.countFocusPassword+=1,this.passwordValue.current.value.length<6&&this.countFocusPassword>=2?this.props.checkValidation(Object(v.a)({},this.props.validation,{isPasswordErrorVisible:!0})):this.props.checkValidation(Object(v.a)({},this.props.validation,{isPasswordErrorVisible:!1}))}},{key:"onSubmit",value:function(){var e=this;this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!0})),function(e,t,a){return fetch("/api/auth/register",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json","Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(!e.error||200===e.status)return t.toast("\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),a.push("/login");t.toast(e.error)})}({email:this.emailValue.current.value,password:this.passwordValue.current.value},this.materialize,this.props.history).then(function(){e.props.checkValidation(Object(v.a)({},e.props.validation,{isBtnDisabled:!1})),e.props.isActive({loginClassName:"active",registerClassname:null})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"auth-block"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-content"},i.a.createElement("span",{className:"card-title"},"C\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),i.a.createElement(_,Object.assign({},this.props,{checkEmail:this.checkEmail,onFocusEmail:this.onFocusEmail,emailValue:this.emailValue,onChange:this.onChange,countFocusEmail:this.countFocusEmail})),i.a.createElement(M,Object.assign({},this.props,{onFocusPassword:this.onFocusPassword,passwordValue:this.passwordValue,onChange:this.onChange,countFocusPassword:this.countFocusPassword}))),i.a.createElement(R,Object.assign({},this.props,{onSubmit:this.onSubmit,click:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}))))}}]),t}(n.Component),U=Object(d.b)(function(e){return{validation:e.validation}},function(e){return{checkValidation:function(t){return e(y(t))},isActive:function(t){return e(F(t))}}})(B),G=a(317),H=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("nav",null,i.a.createElement("div",{className:"nav-wrapper grey darken-1"},i.a.createElement(G.a,{className:"brand-logo",to:"/",onClick:this.props.checkClassName},"Newborn"),i.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},i.a.createElement("li",{className:this.props.loginClassName},i.a.createElement(G.a,{to:"/login",onClick:this.props.checkClassName},"\u0412\u0445\u043e\u0434")),i.a.createElement("li",{className:this.props.registerClassname},i.a.createElement(G.a,{to:"/register",onClick:this.props.checkClassName},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))))}}]),t}(n.Component),Y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).location=!0,e.checkClassName=e.checkClassName.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){return this.props.checkValidation(Object(v.a)({},this.props.validation,{isBtnDisabled:!0})),"/register"===this.props.location.pathname?this.props.isActive({registerClassname:"active"}):this.props.isActive({loginClassName:"active"})}},{key:"checkClassName",value:function(e){"Newborn"===e.target.text||"\u0412\u0445\u043e\u0434"===e.target.text?this.props.isActive({loginClassName:"active"}):this.props.isActive({registerClassname:"active"})}},{key:"render",value:function(){return i.a.createElement(m.a,null,i.a.createElement("div",null,i.a.createElement(H,Object.assign({},this.props,{checkClassName:this.checkClassName})),i.a.createElement(E.a,null,i.a.createElement(j.a,{exact:!0,from:"/",to:"/login"}),i.a.createElement(b.a,{path:"/login",exact:!0,component:x}),i.a.createElement(b.a,{path:"/register",exact:!0,component:U}))))}}]),t}(n.Component),q=Object(d.b)(function(e){return{loginClassName:e.activeLinks.loginClassName,registerClassname:e.activeLinks.registerClassname,validation:e.validation}},function(e){return{isActive:function(t){return e(F(t))},checkValidation:function(t){return e(y(t))}}})(Y),W=function(){return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col s12 center"},i.a.createElement("div",{className:"preloader-wrapper active"},i.a.createElement("div",{className:"spinner-layer spinner-red-only"},i.a.createElement("div",{className:"circle-clipper left"},i.a.createElement("div",{className:"circle"})),i.a.createElement("div",{className:"gap-patch"},i.a.createElement("div",{className:"circle"})),i.a.createElement("div",{className:"circle-clipper right"},i.a.createElement("div",{className:"circle"}))))))},J=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"col s12 l6"},i.a.createElement("div",{className:"card light-blue lighten-2 white-text"},i.a.createElement("div",{className:"card-content"},i.a.createElement("span",{className:"card-title"},"\u0412\u044b\u0440\u0443\u0447\u043a\u0430:"),i.a.createElement("h3",null,this.props.gain.yesterday," ","\u0433\u0440\u043d."),i.a.createElement("h3",{className:this.props.gain.isHigher?"green-text text-darket-2 m0 mb1":"red-text m0 mb1"},i.a.createElement("i",{className:"material-icons"},this.props.gain.isHigher?"arrow_upward":"arrow_downward"),this.props.gain.percent,"%"),i.a.createElement("p",null,"\u0412\u044b\u0440\u0443\u0447\u043a\u0430 \u0432\u0430\u0448\u0435\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430 \u0432\u0447\u0435\u0440\u0430 \u043d\u0430"," ",this.props.gain.percent,"%",this.props.gain.isHigher?" \u0432\u044b\u0448\u0435 ":" \u043d\u0438\u0436\u0435 ","\u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e:"," ",this.props.gain.compare," ","\u0433\u0440\u043d. \u0432 \u0434\u0435\u043d\u044c"))))}}]),t}(n.Component),K=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"col s12 l6"},i.a.createElement("div",{className:"card orange lighten-2 white-text"},i.a.createElement("div",{className:"card-content"},i.a.createElement("span",{className:"card-title"},"\u0417\u0430\u043a\u0430\u0437\u044b:"),i.a.createElement("h3",null,this.props.orders.yesterday," ","\u0437\u0430\u043a."),i.a.createElement("h3",{className:this.props.orders.isHigher?"green-text text-darket-2 m0 mb1":"red-text m0 mb1"},i.a.createElement("i",{className:"material-icons"},this.props.orders.isHigher?"arrow_upward":"arrow_downward"),this.props.orders.percent,"%"),i.a.createElement("p",null,"\u0427\u0438\u0441\u043b\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u0447\u0435\u0440\u0430 \u043d\u0430",this.props.orders.percent,"%",this.props.orders.isHigher?" \u0432\u044b\u0448\u0435 ":" \u043d\u0438\u0436\u0435 ","\u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f:"," ",this.props.orders.compare," ","\u0437\u0430\u043a. \u0432 \u0434\u0435\u043d\u044c"))))}}]),t}(n.Component),Q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"tap-target","data-target":"menu",ref:this.props.tapTargetInit},i.a.createElement("div",{className:"tap-target-content"},i.a.createElement("h5",null,"\u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u0430 \u044d\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430?"),i.a.createElement("p",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u201c\u041e\u0431\u0437\u043e\u0440\u201d \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436 \u0437\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u0434\u0435\u043d\u044c. \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0441\u043e \u0441\u0440\u0435\u0434\u043d\u0438\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u043c \u043f\u043e\u043d\u044f\u0442\u044c, \u043a\u0430\u043a \u0438\u0434\u0443\u0442 \u0434\u0435\u043b\u0430 \u0443 \u0412\u0430\u0448\u0435\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430.")))}}]),t}(n.Component),$=a(39),X=a.n($),Z=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).yesterday=new Date,e.openInfo=e.openInfo.bind(Object(O.a)(Object(O.a)(e))),e.tapInit=!1,e.materialize=new A,e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.date=this.yesterday.setDate(this.yesterday.getDate()-1)}},{key:"openInfo",value:function(){this.tapInit||(this.tapTarget=this.materialize.targetInit(this.props.tapTargetInit.current),this.tapInit=!0),this.tapTarget.open()}},{key:"render",value:function(){return i.a.createElement("div",{className:"page-title"},i.a.createElement("h4",null,"\u041e\u0431\u0437\u043e\u0440 \u0437\u0430 \u0432\u0447\u0435\u0440\u0430 (",X()(this.date).format("DD.MM.YYYY"),")",i.a.createElement("i",{onClick:this.openInfo,className:"material-icons black-text pointer"},"info_outline")))}}]),t}(n.Component),ee=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).tapTargetInit=i.a.createRef(),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.isLoading(!0),this.props.fetchOverview(this.props.user).then(function(){return e.props.isLoading(!1)})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Z,{openInfo:this.openInfo,tapTargetInit:this.tapTargetInit}),i.a.createElement("div",{className:"row"},this.props.preload?i.a.createElement(W,null):i.a.createElement("div",null,i.a.createElement(J,this.props),i.a.createElement(K,this.props))),i.a.createElement(Q,{tapTargetInit:this.tapTargetInit}))}}]),t}(n.Component),te=Object(d.b)(function(e){return{user:e.user,gain:e.overview.gain,orders:e.overview.orders,preload:e.preload}},function(e){return{fetchOverview:function(t){return e((a=t,function(e){return P.a.get("/api/analytics/overview",{headers:{Authorization:a}}).then(function(t){e({type:"GET_OVERVIEW",overview:t.data})})}));var a},isLoading:function(t){return e(k(t))}}})(ee),ae=a(136),ne=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"average-price"},i.a.createElement("p",null,"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a",i.a.createElement("strong",null,this.props.avarage," ","\u0433\u0440\u043d."))),i.a.createElement("div",{className:"analytics-block pb3"},i.a.createElement("h5",null,"\u0412\u044b\u0440\u0443\u0447\u043a\u0430"),i.a.createElement("canvas",{ref:this.props.gain})),i.a.createElement("div",{className:"analytics-block"},i.a.createElement("h5",null,"\u0417\u0430\u043a\u0430\u0437\u044b"),i.a.createElement("canvas",{ref:this.props.order})))}}]),t}(n.Component),ie=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).gain=i.a.createRef(),e.order=i.a.createRef(),e.gainConfig={label:"\u0412\u044b\u0440\u0443\u0447\u043a\u0430",color:"rgb(255, 99, 132)"},e.orderConfig={label:"\u0417\u0430\u043a\u0430\u0437\u044b",color:"rgb(54, 162, 235)"},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAnalytics().then(function(){e.writeAnalytics(e.gain.current,e.createChartConfig,e.gainConfig),e.writeAnalytics(e.order.current,e.createChartConfig,e.orderConfig)})}},{key:"writeAnalytics",value:function(e,t,a){var n=e.getContext("2d");n.canvas.height="300px",new ae.Chart(n,t(a))}},{key:"createChartConfig",value:function(e){var t=e.labels,a=e.data;return{type:"line",options:{responsive:!0},data:{labels:t,datasets:[{label:e.label,data:a,borderColor:e.color,steppedLine:!1,fill:!1}]}}}},{key:"getAnalytics",value:function(){var e=this;return this.props.isLoading(!0),this.props.fetchAnalytics(this.props.user,this.gainConfig,this.orderConfig).then(function(){return e.props.isLoading(!1)})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"page-title"},i.a.createElement("h4",null,"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430")),i.a.createElement("div",null,this.props.preload?i.a.createElement(W,null):i.a.createElement(ne,Object.assign({},this.props,{order:this.order,gain:this.gain}))))}}]),t}(n.Component),re=Object(d.b)(function(e){return{user:e.user,preload:e.preload,avarage:e.analytics.avarage,chart:e.analytics.chart}},function(e){return{fetchAnalytics:function(t,a,n){return e(function(e,t,a){return function(n){return P.a.get("/api/analytics/analytics",{headers:{Authorization:e}}).then(function(e){t.labels=e.data.chart.map(function(e){return e.label}),t.data=e.data.chart.map(function(e){return e.gain}),a.labels=e.data.chart.map(function(e){return e.label}),a.data=e.data.chart.map(function(e){return e.order}),n({type:"GET_ANALYTICS",analytics:e.data})})}}(t,a,n))},isLoading:function(t){return e(k(t))}}})(ie),oe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"page-title"},i.a.createElement("h4",null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),i.a.createElement("button",{onClick:function(){e.props.history.push("/categories/new")},className:"waves-effect waves-light btn grey darken-1"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"))}}]),t}(n.Component),se=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col s12"},i.a.createElement("div",{className:"collection"},0===this.props.categories.length?i.a.createElement("div",{className:"center"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435\u0442"):this.props.categories.map(function(t,a){return i.a.createElement(G.a,{onClick:function(){e.props.checkValidation(Object(v.a)({},e.props.validation,{inputName:t.name}))},to:"/categories/".concat(t._id),className:"collection-item",key:a},t.name)}))))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getCategories=a.getCategories.bind(Object(O.a)(Object(O.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.checkValidation(Object(v.a)({},this.props.validation,{imagePreview:null,loadImage:null})),this.props.isLoading(!0),this.getCategories()}},{key:"getCategories",value:function(){var e=this;this.props.fetchCategories(this.props.user).then(function(){return e.props.isLoading(!1)})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(oe,this.props),this.props.preload?i.a.createElement(W,null):i.a.createElement(se,this.props))}}]),t}(n.Component),le=Object(d.b)(function(e){return{user:e.user,preload:e.preload,categories:e.categories,validation:e.validation}},function(e){return{isLoading:function(t){return e(k(t))},fetchCategories:function(t){return e(C(t))},checkValidation:function(t){return e(y(t))}}})(ce),ue=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("table",{className:"highlight mb2"},i.a.createElement(pe,null),i.a.createElement("tbody",null,this.props.orderList.map(function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,t.order),i.a.createElement("td",null,X()(t.date).format("dddd, MMMM DD YYYY")),i.a.createElement("td",null,X()(t.date).format("HH:mm:ss")),i.a.createElement("td",null,e.props.computePrice(t)," ","\u0433\u0440\u043d."),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.props.onSelectOrder(t)},className:"btn btn-small grey darken-1"},i.a.createElement("i",{className:"material-icons"},"open_in_new"))))})))}}]),t}(n.Component),pe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u2116"),i.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),i.a.createElement("th",null,"\u0412\u0440\u0435\u043c\u044f"),i.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),i.a.createElement("th",null)))}}]),t}(n.Component),de=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"order-list",className:"modal modal-fixed-footer",ref:this.props.initModal},i.a.createElement("div",{className:"modal-content"},i.a.createElement("h4",{className:"mb1"},"\u0417\u0430\u043a\u0430\u0437",this.props.order.order),i.a.createElement(he,this.props),i.a.createElement("div",{className:"order-summary"},i.a.createElement("p",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",i.a.createElement("strong",null," ",this.props.order.list?this.props.computePrice(this.props.order):null," ","\u0433\u0440\u043d.")))),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{onClick:this.props.onCancelModal,className:"modal-action waves-effect waves-black btn-flat"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}}]),t}(n.Component),he=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("table",{className:"highlight"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),i.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),i.a.createElement("th",null,"\u0426\u0435\u043d\u0430"))),i.a.createElement("tbody",null,this.props.order.list?this.props.order.list.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e.name),i.a.createElement("td",null,e.quantity),i.a.createElement("td",null,e.cost," ","\u0433\u0440\u043d."))}):null))}}]),t}(n.Component),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).materialize=new A,a.initModal=i.a.createRef(),a.onSelectOrder=a.onSelectOrder.bind(Object(O.a)(Object(O.a)(a))),a.onCancelModal=a.onCancelModal.bind(Object(O.a)(Object(O.a)(a))),a.order={},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.modal=this.materialize.modalInit(this.initModal.current)}},{key:"onSelectOrder",value:function(e){this.order=Object(v.a)({},e),this.modal.open(),this.forceUpdate()}},{key:"onCancelModal",value:function(){this.modal.close()}},{key:"computePrice",value:function(e){return e.list.reduce(function(e,t){return e+t.cost*t.quantity},0)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(ue,Object.assign({},this.props,{onSelectOrder:this.onSelectOrder,computePrice:this.computePrice})),i.a.createElement(de,Object.assign({},this.props,{computePrice:this.computePrice,onCancelModal:this.onCancelModal,order:this.order,initModal:this.initModal})))}}]),t}(n.Component);var be=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).initTooltip=i.a.createRef(),e.materialize=new A,e.isFilterVisible=e.isFilterVisible.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.materialize.toolTipInit(this.initTooltip.current)}},{key:"isFilterVisible",value:function(){this.isDisabled=!this.isDisabled,this.props.disabled(Object(v.a)({},this.props.validation,{isDisabled:this.isDisabled}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"page-title"},i.a.createElement("h4",null,"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),i.a.createElement("button",{ref:this.initTooltip,onClick:this.isFilterVisible,className:"btn btn-small","data-position":"left","data-tooltip":this.props.validation.isDisabled?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"},i.a.createElement("i",{className:"material-icons"},"filter_list")))}}]),t}(n.Component),fe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:{display:this.props.validation.isDisabled?"none":"block"},className:"center mb2"},i.a.createElement("button",{onClick:this.props.loadMore,className:"btn waves-effect grey darken-1 btn-small"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435"))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).orderNumber=i.a.createRef(),a.initStart=i.a.createRef(),a.initEnd=i.a.createRef(),a.materialize=new A,a.validateDate=a.validateDate.bind(Object(O.a)(Object(O.a)(a))),a.applyFilter=a.applyFilter.bind(Object(O.a)(Object(O.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"fetchOrderList",value:function(e,t){var a=this;P.a.get("/api/order",{headers:{Authorization:t},params:e}).then(function(e){a.props.fetchOrdersList(e.data),a.props.isLoading(!1),e.data.length<a.STEP&&a.props.disabled(Object(v.a)({},a.props.validation,{moreLoad:!1}))})}},{key:"validateDate",value:function(){return this.end.date&&this.start.date&&""===this.orderNumber.current.value?(this.valid=this.start<this.end,this.params=Object(v.a)({},{},{start:this.start.date,end:this.end.date}),this.props.disabled(Object(v.a)({},this.props.validation,{isFilterValid:this.valid}))):!this.end.date&&!this.start.date&&+this.orderNumber.current.value>0?(this.params=Object(v.a)({},{},{order:this.orderNumber.current.value}),this.props.disabled(Object(v.a)({},this.props.validation,{isFilterValid:!0}))):this.end.date||this.start.date||""!==this.orderNumber.current.value?this.props.disabled(Object(v.a)({},this.props.validation,{isFilterValid:!1})):(this.params=Object(v.a)({},this.props.params,{offset:0,limit:0}),this.props.disabled(Object(v.a)({},this.props.validation,{isFilterValid:!0})))}},{key:"applyFilter",value:function(){this.props.isLoading(!0),this.props.clearOrdersList(),this.fetchOrderList(this.params,this.props.user),this.props.disabled(Object(v.a)({},this.props.validation,{isBtnVisible:!1}))}},{key:"componentDidMount",value:function(){this.end=this.materialize.datePickeInit(this.initEnd.current,{format:"dd.mm.yyyy",showClearBtn:!0,onClose:this.validateDate}),this.start=this.materialize.datePickeInit(this.initStart.current,{format:"dd.mm.yyyy",showClearBtn:!0,onClose:this.validateDate})}},{key:"render",value:function(){return i.a.createElement("div",{style:{display:this.props.validation.isDisabled?"block":"none"},className:"filter"},i.a.createElement("div",{className:"fr"},i.a.createElement("div",{className:"col order"},i.a.createElement("div",{className:"input-field inline order-position-input"},i.a.createElement("input",{type:"number",id:"number",ref:this.orderNumber,onChange:this.validateDate}),i.a.createElement("label",{htmlFor:"number"},"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"))),i.a.createElement("div",{className:"col filter-pickers"},i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{type:"text",ref:this.initStart}),i.a.createElement("label",null,"\u041d\u0430\u0447\u0430\u043b\u043e")),i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{type:"text",ref:this.initEnd}),i.a.createElement("label",null,"\u041a\u043e\u043d\u0435\u0446")))),i.a.createElement("button",{disabled:!this.props.validation.isFilterValid,onClick:this.applyFilter,className:"btn waves-effect wavers-light btn-small"},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"))}}]),t}(n.Component),Oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).initTooltip=i.a.createRef(),a.loadMore=a.loadMore.bind(Object(O.a)(Object(O.a)(a))),a.STEP=2,a.params={offset:0,limit:a.STEP},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isLoading(!0),this.props.disabled(Object(v.a)({},this.props.validation,{isDisabled:!1,moreLoad:!0,isBtnVisible:!0})),this.fetchOrderList(this.params,this.props.user)}},{key:"componentWillUnmount",value:function(){this.props.clearOrdersList()}},{key:"fetchOrderList",value:function(e,t){var a=this;P.a.get("/api/order",{headers:{Authorization:t},params:e}).then(function(e){a.props.fetchOrdersList(e.data),a.props.isLoading(!1),a.props.isLoadMore(!1),e.data.length<a.STEP&&a.props.disabled(Object(v.a)({},a.props.validation,{moreLoad:!1}))})}},{key:"loadMore",value:function(){this.props.isLoadMore(!0),this.params.offset+=this.STEP,this.fetchOrderList(this.params,this.props.user)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(be,this.props),i.a.createElement(ve,Object.assign({},this.props,{params:this.params,fetchOrderList:this.fetchOrderList})),this.props.preload?i.a.createElement(W,null):i.a.createElement("div",null,0===this.props.orderList.length?i.a.createElement("div",{className:"center"},"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435\u0442"):i.a.createElement(me,{orderList:this.props.orderList}),this.props.loadMorePreload?i.a.createElement(W,null):i.a.createElement(fe,Object.assign({loadMore:this.loadMore},this.props))))}}]),t}(n.Component),Ee=Object(d.b)(function(e){return{user:e.user,validation:e.validation,orderList:e.orderList,preload:e.preload,loadMorePreload:e.loadMorePreload}},function(e){return{disabled:function(t){return e(y(t))},fetchOrdersList:function(t){return e(function(e){return{type:"FETCH_ORDER_LIST",orders:e}}(t))},isLoading:function(t){return e(k(t))},clearOrdersList:function(){return e({type:"CLEAR_ORDER_LIST"})},isLoadMore:function(t){return e({type:"IS_LOADING_MORE",preload:t})}}})(Oe),je=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"page-title"},this.props.orderId?i.a.createElement("h4",null,i.a.createElement(G.a,{to:"/order"},"\u0417\u0430\u043a\u0430\u0437"),i.a.createElement("i",{className:"material-icons"},"keyboard_arrow_right"),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044e"):i.a.createElement("h4",null,"\u0417\u0430\u043a\u0430\u0437"),i.a.createElement("button",{disabled:0===this.props.orders.length,onClick:this.props.openModal,className:"waves-effect btn grey darken-1"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"))}}]),t}(n.Component),ge=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("table",{className:"highlight"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),i.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),i.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),i.a.createElement("th",null))),i.a.createElement("tbody",null,this.props.orders.map(function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,t.name),i.a.createElement("td",null,t.quantity),i.a.createElement("td",null,t.cost," ","\u0433\u0440\u043d."),i.a.createElement("td",null,i.a.createElement("i",{onClick:function(){return e.props.removePosition(t)},className:"material-icons pointer"},"delete")))})))}}]),t}(n.Component),ye=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onSubmit=e.onSubmit.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(){var e={list:this.props.orders.map(function(e){return delete e.id,e})};this.props.createPosition(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{disabled:!!this.props.validation.isDisabled,onClick:this.props.closeModal,className:"modal-action waves-effect waves-black btn-flat"},"\u041e\u0442\u043c\u0435\u043d\u0430"),i.a.createElement("button",{onClick:this.onSubmit,disabled:!(0!==this.props.orders.length&&!this.props.validation.isDisabled),className:"modal-action btn waves-effect"},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"))}}]),t}(n.Component),ke=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"order-summary"},i.a.createElement("p",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",i.a.createElement("strong",null,this.props.price," ","\u0433\u0440\u043d.")))}}]),t}(n.Component),Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).initModal=i.a.createRef(),a.materialize=new A,a.openModal=a.openModal.bind(Object(O.a)(Object(O.a)(a))),a.closeModal=a.closeModal.bind(Object(O.a)(Object(O.a)(a))),a.removePosition=a.removePosition.bind(Object(O.a)(Object(O.a)(a))),a.createPosition=a.createPosition.bind(Object(O.a)(Object(O.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.disabled(Object(v.a)({},this.props.validation,{isDisabled:!1})),this.modal=this.materialize.modalInit(this.initModal.current)}},{key:"openModal",value:function(){this.modal.open()}},{key:"closeModal",value:function(){this.modal.close()}},{key:"removePosition",value:function(e){this.props.removePosition(e)}},{key:"createPosition",value:function(e){var t=this;this.props.disabled(Object(v.a)({},this.props.validation,{isDisabled:!0})),this.props.clearOrders(this.props.user,e,this.modal,this.materialize).then(function(){t.props.disabled(Object(v.a)({},t.props.validation,{isDisabled:!1}))})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(je,Object.assign({},this.props,{openModal:this.openModal})),i.a.createElement("div",{ref:this.initModal,className:"modal modal-fixed-footer"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("h4",{className:"mb1"},"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437"),i.a.createElement(ge,this.props),i.a.createElement(ke,this.props)),i.a.createElement(ye,Object.assign({},this.props,{createPosition:this.createPosition,closeModal:this.closeModal}))))}}]),t}(n.Component),Ne=Object(d.b)(function(e){return{orderId:e.orderId,orders:e.orders.list,price:e.orders.price,user:e.user,validation:e.validation}},function(e){return{getID:function(t){return e(S(t))},removePosition:function(t){return e(function(e){return{type:"REMOVE_ORDER",order:e}}(t))},clearOrders:function(t,a,n,i){return e(function(e,t,a,n){return function(i){return P.a.post("/api/order",t,{headers:{Authorization:e}}).then(function(e){return a.close(),n.toast("\u0417\u0430\u043a\u0430\u0437 \u2116".concat(e.data.order," \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")),i({type:"ORDERS_CLEAR"})})}}(t,a,n,i))},disabled:function(t){return e(y(t))}}})(Ce),we=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"page-subtitle"},i.a.createElement("h4",null,"\u041f\u043e\u0437\u0438\u0446\u0438\u0438:"),i.a.createElement("button",{onClick:this.props.onAddPosition,className:"waves-effect waves-light btn grey darken-1 btn-small"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0437\u0438\u0446\u0438\u044e"))}}]),t}(n.Component),Ie=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"collection"},this.props.preload?i.a.createElement(W,null):i.a.createElement("div",null,0!==this.props.positions.length?this.props.positions.map(function(t,a){return i.a.createElement("i",{onClick:function(){return e.props.onUpdatePosition(t)},className:"collection-item collection-item-icon blue-text",key:a},i.a.createElement("span",null,t.name," ",i.a.createElement("strong",null,t.cost," ","\u0433\u0440\u043d.")),i.a.createElement("span",null,i.a.createElement("i",{onClick:function(a){e.props.onDeletePosition(t),a.stopPropagation()},className:"material-icons"},"delete")))}):i.a.createElement("div",{className:"center"}," \u0443 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u0439")))}}]),t}(n.Component),Pe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"modal",ref:this.props.initModal},i.a.createElement("div",{className:"modal-content"},i.a.createElement("h4",{className:"mb1"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0437\u0438\u0446\u0438\u044e"),i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{ref:this.props.name,id:"pos-name",type:"text",required:!0}),i.a.createElement("label",{htmlFor:"pos-name"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")),i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{ref:this.props.cost,id:"pos-cost",type:"number",required:!0}),i.a.createElement("label",{htmlFor:"pos-cost"},"\u0426\u0435\u043d\u0430"))),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{onClick:this.props.onCancel,className:"modal-action waves-effect waves-black btn-flat"},"\u041e\u0442\u043c\u0435\u043d\u0430"),i.a.createElement("button",{onClick:this.props.onSubmit,className:"modal-action btn waves-effect"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),t}(n.Component),De=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).initModal=i.a.createRef(),e.name=i.a.createRef(),e.cost=i.a.createRef(),e.positionId=null,e.materialize=new A,e.onUpdatePosition=e.onUpdatePosition.bind(Object(O.a)(Object(O.a)(e))),e.onAddPosition=e.onAddPosition.bind(Object(O.a)(Object(O.a)(e))),e.onCancel=e.onCancel.bind(Object(O.a)(Object(O.a)(e))),e.onSubmit=e.onSubmit.bind(Object(O.a)(Object(O.a)(e))),e.onDeletePosition=e.onDeletePosition.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.modal=this.materialize.modalInit(this.initModal.current),this.props.isLoading(!0),this.props.positionsFetch(this.props.user,this.props.categoryId).then(function(){e.props.isLoading(!1)})}},{key:"onUpdatePosition",value:function(e){this.positionId=e._id,this.name.current.value=e.name,this.cost.current.value=e.cost,this.modal.open(),this.materialize.updateInput(this.name.current,this.cost.current)}},{key:"onAddPosition",value:function(){this.positionId=null,this.name.current.value="",this.cost.current.value="",this.modal.open()}},{key:"onCancel",value:function(){this.modal.close()}},{key:"onSubmit",value:function(){var e={name:this.name.current.value,cost:+this.cost.current.value,category:this.props.categoryId};this.positionId?this.updatePosition(e):this.createPosition(e)}},{key:"updatePosition",value:function(e){var t=this;this.props.updatePosition(this.props.user,e,this.positionId,this.props.positions).then(function(){t.name.current.value="",t.cost.current.value="",t.materialize.toast("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"),t.modal.close()})}},{key:"onDeletePosition",value:function(e){var t=this;this.props.deletePosition(this.props.user,this.props.positions,e).then(function(){t.materialize.toast("\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),t.modal.close()})}},{key:"createPosition",value:function(e){var t=this;this.props.createPosition(this.props.user,e).then(function(){t.materialize.toast("\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0430"),t.modal.close()})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col s12"},i.a.createElement(we,Object.assign({},this.props,{onAddPosition:this.onAddPosition})),i.a.createElement(Ie,Object.assign({},this.props,{onDeletePosition:this.onDeletePosition,onUpdatePosition:this.onUpdatePosition})))),i.a.createElement(Pe,Object.assign({},this.props,{onSubmit:this.onSubmit,cost:this.cost,name:this.name,onCancel:this.onCancel,initModal:this.initModal})))}}]),t}(n.Component),Ve=Object(d.b)(function(e){return{auth:e.auth,positions:e.positions,preload:e.preload}},function(e){return{positionsFetch:function(t,a){return e(D(t,a))},createPosition:function(t,a){return e(function(e,t){return function(a){return P.a.post("/api/position",t,{headers:{Authorization:e}}).then(function(e){a({type:"POST_POSITION",position:e.data})})}}(t,a))},updatePosition:function(t,a,n,i){return e(function(e,t,a,n){return function(i){return P.a.put("/api/position/".concat(a),t,{headers:{Authorization:e}}).then(function(e){var t=Object(w.a)(n);t[n.findIndex(function(t){return t._id===e.data._id})]=e.data,i(V(t))})}}(t,a,n,i))},deletePosition:function(t,a,n){return e(function(e,t,a){return function(n){return P.a.delete("/api/position/".concat(a._id),{headers:{Authorization:e}}).then(function(){var e=Object(w.a)(t).filter(function(e){return e._id!==a._id});n(V(e))})}}(t,a,n))},isLoading:function(t){return e(k(t))}}})(De),Se=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).deleteCategory=e.deleteCategory.bind(Object(O.a)(Object(O.a)(e))),e.materialize=new A,e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"deleteCategory",value:function(){var e=this,t=this.props.match.params.id;P.a.delete("/api/category/".concat(t),{headers:{Authorization:this.props.user}}).then(function(){return e.materialize.toast("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),e.props.history.push("/categories")})}},{key:"render",value:function(){return i.a.createElement("div",{className:"page-title"},i.a.createElement("h4",null,i.a.createElement(G.a,{to:"/categories"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),i.a.createElement("i",{className:"material-icons"},"keyboard_arrow_right"),this.props.match.params.id?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"," ","\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),i.a.createElement("span",null,this.props.match.params.id?i.a.createElement("button",{onClick:this.deleteCategory,className:"btn btn-small red"},i.a.createElement("i",{className:"material-icons"},"delete")):null))}}]),t}(n.Component),Fe=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).touched=0,e.onChange=e.onChange.bind(Object(O.a)(Object(O.a)(e))),e.onFokus=e.onFokus.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(){if(this.props.input.current.value.length>0&&this.props.input.current.value.length<2){var e=Object(v.a)({},this.props.validation,{isDisabled:!1});this.props.checkValidation(e)}else if(0===this.props.input.current.value.length){var t=Object(v.a)({},this.props.validation,{isDisabled:!0});this.props.checkValidation(t)}}},{key:"onFokus",value:function(){this.touched<2&&this.touched++;var e=Object(v.a)({},this.props.validation,{countInput:this.touched});this.props.checkValidation(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{className:this.props.validation.isDisabled&&2===this.props.validation.countInput?"invalid":null,type:"text",required:!0,ref:this.props.input,onChange:this.onChange,onFocus:this.onFokus,defaultValue:this.props.match.params.id?this.props.category.name:""}),i.a.createElement("label",{htmlFor:"name"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),this.props.validation.isDisabled&&2===this.props.validation.countInput?i.a.createElement("span",{className:"helper-text red-text"},"\u0418\u043c\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"):null)}}]),t}(n.Component),Te=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).file=i.a.createRef(),e.onFileUpload=e.onFileUpload.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onFileUpload",value:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.onload=function(){t.props.showImage({loadImage:null,imagePreview:n.result,file:a})},n.readAsDataURL(a)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("input",{ref:this.file,onChange:this.onFileUpload,type:"file",style:{display:"none"}}),i.a.createElement("button",{onClick:function(){return e.file.current.click()},className:"waves-effect waves-light btn orange lighten-2 mb2"},i.a.createElement("i",{className:"material-icons left"},"backup"),"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"))}}]),t}(n.Component),Le=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.props.onSubmit,disabled:this.props.validation.isDisabled,className:"waves-effect waves-light btn"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"))}}]),t}(n.Component),Ae=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"col s12 l4 center"},this.props.image.imagePreview||this.props.image.loadImage?i.a.createElement("img",{className:"responsive-img",style:{height:"200px"},src:this.props.image.imagePreview?this.props.image.imagePreview:"http://localhost:3000/".concat(this.props.image.loadImage),alt:this.props.image.imagePreview}):null)}}]),t}(n.Component),_e=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).materialize=new A,e.input=i.a.createRef(),e.onSubmit=e.onSubmit.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id?this.props.getCategoryById(this.props.match.params.id,this.props.user).then(function(t){e.props.checkValidation(Object(v.a)({},e.props.validation,{isDisabled:!1})),e.props.showImage({imagePreview:null,loadImage:t.category.imageSrc}),e.materialize.updateInput(e.input.current)}):(this.props.checkValidation(Object(v.a)({},this.props.validation,{isDisabled:!0})),this.props.showImage({}))}},{key:"componentWillUnmount",value:function(){this.props.resetCategory({}),this.props.showImage({})}},{key:"createCategory",value:function(e,t){var a=this,n=new FormData;t&&n.append("image",t,t.name),n.append("name",e),fetch("/api/category",{method:"post",body:n,headers:{Authorization:this.props.user}}).then(function(){return a.materialize.toast("\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0441\u044c")})}},{key:"updateCategory",value:function(e,t,a){var n=this,i=new FormData;a&&i.append("image",a,a.name),i.append("name",t),fetch("/api/category/".concat(e),{method:"put",body:i,headers:{Authorization:this.props.user}}).then(function(){return n.materialize.toast("\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c")})}},{key:"onSubmit",value:function(){this.props.match.params.id?this.updateCategory(this.props.match.params.id,this.input.current.value,this.props.image.file):this.createCategory(this.input.current.value,this.props.image.file)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Se,this.props),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col s12 l6"},i.a.createElement(Fe,Object.assign({},this.props,{input:this.input})),i.a.createElement(Te,this.props),i.a.createElement(Le,Object.assign({},this.props,{onSubmit:this.onSubmit,createCategory:this.createCategory,updateCategory:this.updateCategory}))),i.a.createElement(Ae,this.props)),this.props.match.params.id?i.a.createElement(Ve,{categoryId:this.props.match.params.id,user:this.props.user}):null)}}]),t}(n.Component),Me=Object(d.b)(function(e){return{validation:e.validation,user:e.user,category:e.categoryById,categories:e.categories,preload:e.preload,image:e.image}},function(e){return{checkValidation:function(t){return e(y(t))},getCategoryById:function(t,a){return e(function(e,t){return function(a){return fetch("/api/category/".concat(e),{method:"get",headers:{Authorization:t,Accept:"application/json","Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return a(N(e))})}}(t,a))},resetCategory:function(t){return e(N(t))},showImage:function(t){return e(function(e){return{type:"SHOW_IMAGE",image:e}}(t))}}})(_e),Re=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).redirect=e.redirect.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"redirect",value:function(e){this.props.history.push("/order/".concat(e._id)),this.props.getID(e._id)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,0!==this.props.categories.length?i.a.createElement("div",{className:"frow order-row"},this.props.categories.map(function(t,a){return i.a.createElement("div",{key:a,onClick:function(){return e.redirect(t)},className:"card waves-effect pointer"},i.a.createElement("div",{className:"center"},i.a.createElement("img",{src:"http://localhost:3000/".concat(t.imageSrc),alt:t.name,className:"responsive-img order-img"})),i.a.createElement("div",{className:"card-content center p10"},i.a.createElement("h5",{className:"m0"},t.name)))})):i.a.createElement("div",{className:"center"},"\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0435\u0442 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439"))}}]),t}(n.Component),ze=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isLoading(!0),this.getCategories(),this.props.getID(null)}},{key:"getCategories",value:function(){var e=this;this.props.fetchCategories(this.props.user).then(function(){return e.props.isLoading(!1)})}},{key:"render",value:function(){return i.a.createElement("div",null,this.props.preload?i.a.createElement(W,null):i.a.createElement(Re,this.props))}}]),t}(n.Component),xe=Object(d.b)(function(e){return{user:e.user,preload:e.preload,categories:e.categories,validation:e.validation,orderId:e.orderId}},function(e){return{isLoading:function(t){return e(k(t))},fetchCategories:function(t){return e(C(t))},getID:function(t){return e(S(t))}}})(ze),Be=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).materialize=new A,e.onAdd=e.onAdd.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onAdd",value:function(e,t){if(t.current.value<1)this.materialize.toast("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 1");else{var a=Object(v.a)({},{},{name:e.name,cost:e.cost,quantity:+t.current.value,id:e._id}),n=Object(w.a)(this.props.orders),i=n.find(function(t){return t.id===e._id});i?(i.quantity+=a.quantity,this.props.updateOrders(n)):this.props.pushOrder(a),this.materialize.toast("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e ".concat(a.quantity," \u043f\u043e\u0437\u0438\u0446\u0438\u0439"))}}},{key:"render",value:function(){var e=this;return i.a.createElement("table",{className:"highlight"},i.a.createElement(Ue,null),i.a.createElement("tbody",null,this.props.positions.map(function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,t.name),i.a.createElement("td",null,t.cost," ","\u0433\u0440\u043d."),i.a.createElement("td",null,i.a.createElement("div",{className:"input-field inline order-position-input"},i.a.createElement("input",{ref:e[t._id]=i.a.createRef(),type:"number",defaultValue:"1",min:"1"}))),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.onAdd(t,e[t._id])},className:"btn waves-effect wavers-light btn-small"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))})))}}]),t}(n.Component),Ue=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),i.a.createElement("th",null,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),i.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e")))}}]),t}(n.Component),Ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).input=i.a.createRef(),a.materialize=new A,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isLoading(!0),this.fetchPositions()}},{key:"fetchPositions",value:function(){var e=this;this.props.ordersFetch(this.props.user,this.props.orderId).then(function(){return e.props.isLoading(!1)})}},{key:"render",value:function(){return i.a.createElement("div",null,this.props.preload?i.a.createElement(W,null):i.a.createElement("div",null,0!==this.props.positions.length?i.a.createElement(Be,this.props):i.a.createElement("div",{className:"center"},"\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u0439 \u043d\u0435\u0442")))}}]),t}(n.Component),He=Object(d.b)(function(e){return{orderId:e.orderId,positions:e.positions,preload:e.preload,user:e.user,orders:e.orders.list}},function(e){return{getID:function(t){return e(S(t))},ordersFetch:function(t,a){return e(D(t,a))},isLoading:function(t){return e(k(t))},pushOrder:function(t){return e(function(e){return{type:"PUSH_ORDER",order:e}}(t))},updateOrders:function(t){return e(function(e){return{type:"UPDATE_QUANTITY",orders:e}}(t))}}})(Ge),Ye=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).floatingInit=i.a.createRef(),e.materialize=new A,e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.materialize.floatingInit(this.floatingInit.current)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"fixed-action-btn",ref:this.floatingInit},i.a.createElement("div",{className:"btn-floating btn-large red"},i.a.createElement("i",{className:"large material-icons"},"add")),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a,{className:"btn-floating green",to:"/order"},i.a.createElement("i",{className:"material-icons"},"assignment"))),i.a.createElement("li",null,i.a.createElement(G.a,{className:"btn-floating blue",to:"/categories/new"},i.a.createElement("i",{className:"material-icons"},"list"))))),i.a.createElement("div",{id:"menu",className:"waves-effect waves-light btn btn-floating"},i.a.createElement("i",{className:"material-icons"},"info")),i.a.createElement("div",{id:"menu",className:"waves-effect waves-light btn btn-floating"},i.a.createElement("i",{className:"material-icons"},"info")))}}]),t}(n.Component),qe=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).logOut=e.logOut.bind(Object(O.a)(Object(O.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"logOut",value:function(){return localStorage.clear(),this.props.userLogin(null),i.a.createElement(j.a,{to:"/login"})}},{key:"render",value:function(){return i.a.createElement("ul",{className:"sidenav sidenav-fixed a-sidenav"},i.a.createElement("h4",null,"Newborn"),this.props.links.map(function(e,t){return i.a.createElement("li",{key:t,className:"bold active"},i.a.createElement(G.a,{to:e.url,className:"waves-effect waves-orange"},e.name))}),i.a.createElement("li",{className:"bold last"},i.a.createElement(G.a,{onClick:this.logOut,to:"/login",className:"waves-effect waves-orange"},"\u0412\u044b\u0439\u0442\u0438")))}}]),t}(n.Component),We=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(m.a,null,i.a.createElement("div",null,i.a.createElement(qe,this.props),i.a.createElement("main",{className:"content"},i.a.createElement(E.a,null,i.a.createElement(j.a,{exact:!0,from:"/login",to:"/overview",component:te}),i.a.createElement(b.a,{exact:!0,path:"/overview",component:te}),i.a.createElement(b.a,{exact:!0,path:"/history",component:Ee}),i.a.createElement(b.a,{exact:!0,path:"/analytics",component:re})),i.a.createElement("div",null,i.a.createElement(b.a,{path:"/order",component:Ne}),i.a.createElement(b.a,{exact:!0,path:"/order",component:xe}),i.a.createElement(b.a,{exact:!0,path:"/order/:id",component:He})),i.a.createElement(E.a,null,i.a.createElement(b.a,{exact:!0,path:"/categories",component:le}),i.a.createElement(b.a,{exact:!0,path:"/categories/new/",component:Me}),i.a.createElement(b.a,{exact:!0,path:"/categories/:id/",component:Me}))),i.a.createElement(Ye,null)))}}]),t}(n.Component),Je=Object(d.b)(function(e){return{links:e.links,token:e.token}},function(e){return{userLogin:function(t){return e(g(t))}}})(We);f.config();var Ke=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.checkToken()}},{key:"componentDidUpdate",value:function(){this.refreshToken()}},{key:"checkToken",value:function(){try{var e=localStorage.getItem("auth-token");if(null!==e){var t=h.verify(e,"dev-jwt");this.getAccessToken(t)}else this.noToken()}catch(a){this.noToken()}}},{key:"refreshToken",value:function(){var e=this;try{var t=this.props.user.split(" ").splice(1,1).join(" "),a=h.verify(t,"dev-jwt"),n=new Date,i=(a.exp-n.getTime()/1e3-10).toFixed(0);setTimeout(function(){if(null!==e.props.user){var t=e.props.user.split(" ").splice(1,1).join(" "),a=h.verify(t,"dev-jwt");a&&t&&e.getAccessToken(a)}},1e3*i)}catch(r){this.noToken()}}},{key:"getAccessToken",value:function(e){var t=this;return fetch("/api/auth/refresh",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json","Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.error&&200!==e.status&&!e.token?t.noToken():(localStorage.clear(),localStorage.setItem("auth-token",e.refreshToken),t.props.userLogin(e.token))})}},{key:"noToken",value:function(){this.props.userLogin(null),localStorage.clear()}},{key:"render",value:function(){return i.a.createElement(m.a,null,i.a.createElement(b.a,{path:"/",component:null===this.props.user?q:Je}))}}]),t}(n.Component),Qe=Object(d.b)(function(e){return{user:e.user}},function(e){return{userLogin:function(t){return e(g(t))}}})(Ke),$e=a(33),Xe=a(137),Ze=a(138),et=[{url:"/overview",name:"\u041e\u0431\u0437\u043e\u0440"},{url:"/analytics",name:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"},{url:"/history",name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"},{url:"/order",name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"},{url:"/categories",name:"\u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442"}];var tt={isBtnDisabled:!0,isEmailErrorVisible:!1,isPasswordErrorVisible:!1,moreLoad:!0,isFilterValid:!0,isBtnVisible:!0};var at=null;var nt=!1;var it=[];var rt=[];var ot=null;var st={list:[],price:0};var ct=[];var lt={gain:"",orders:""};var ut={};var pt={loginClassName:"active",registerClassname:null};var dt={};var ht=!1;var mt=Object($e.combineReducers)({links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LINKS_ACTIVATE":return t.links;default:return e}},validation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VALIDATION":return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return t.token;default:return e}},preload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING":return t.preload;default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CATEGORIES":return t.categories;default:return e}},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POSITIONS":return t.positions;case"POST_POSITION":return[].concat(Object(w.a)(e),[t.position]);case"UPDATE_POSITION":return t.positions;default:return e}},orderId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_ID":return t.id;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUSH_ORDER":return{list:[].concat(Object(w.a)(e.list),[t.order]),price:e.price+t.order.cost*t.order.quantity};case"UPDATE_QUANTITY":return{list:Object(w.a)(t.orders),price:e.list.reduce(function(e,t){return e+t.cost*t.quantity},0)};case"REMOVE_ORDER":return{list:e.list.filter(function(e){return e.id!==t.order.id}),price:e.list.filter(function(e){return e.id!==t.order.id}).reduce(function(e,t){return e+t.cost*t.quantity},0)};case"ORDERS_CLEAR":return st;default:return e}},orderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ORDER_LIST":return[].concat(Object(w.a)(e),Object(w.a)(t.orders));case"CLEAR_ORDER_LIST":return ct;default:return e}},overview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_OVERVIEW":return Object(v.a)({},t.overview);default:return e}},analytics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ANALYTICS":return Object(v.a)({},t.analytics);default:return e}},activeLinks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECK_LINKS":return t.links;default:return e}},categoryById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CATEGORY_BY_ID":return t.category;default:return e}},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_IMAGE":return t.image;default:return e}},loadMorePreload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING_MORE":return t.preload;default:return e}}}),bt=Object($e.createStore)(mt,Object(Ze.composeWithDevTools)(Object($e.applyMiddleware)(Xe.a)));o.a.render(i.a.createElement(d.a,{store:bt},i.a.createElement(Qe,null)),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.4404510f.chunk.js.map